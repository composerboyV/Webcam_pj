# 🎯 간단한 웹캠 얼굴 검출 프로그램 (Python)

Python과 OpenCV를 활용한 **Webcam project** 프로그램입니다.  
웹캠을 통해 들어오는 영상에서 얼굴을 실시간으로 감지하고 표시합니다.

---

## 🛠️ 개발 환경

- **언어**: Python 3.6+  
- **라이브러리**: OpenCV (opencv-python)  
- **플랫폼**: Linux, Windows, macOS  

---

## 📦 프로젝트 구조

```
webcam/
├── main.py                          # 메인 프로그램 (84줄)
├── data/
│   └── haarcascades/               # 얼굴 검출 모델
│       └── haarcascade_frontalface_alt.xml
├── README.md                       # 프로젝트 설명
├── Haar_Cascade_알고리즘_완전분석.txt   # 알고리즘 설명
└── Python_완전초보자_가이드.txt        # 초보자 가이드
```

---

## 🚀 설치 및 실행

```bash
# OpenCV 설치
pip3 install opencv-python

# 프로그램 실행
python3 main.py
```

---

## 🎮 사용법

### 키보드 조작
- **ESC**: 프로그램 종료
- **S**: 스크린샷 저장 (screenshot.jpg)
- **기타 키**: 키 코드 출력

### 프로그램 동작
1. 웹캠 연결 및 초기화
2. 얼굴 검출기 로드 
3. 실시간 얼굴 검출 즉시 시작
4. 검출된 얼굴에 녹색 사각형과 'FACE' 텍스트 표시

---

## 🔧 주요 기능

### ✅ 핵심 기능
- **실시간 얼굴 검출**: Haar Cascade 알고리즘 사용
- **웹캠 스트리밍**: 640x480 해상도
- **스크린샷 저장**: S키로 현재 화면 캡처
- **안전한 종료**: ESC키로 정상 종료

### ✅ 메모리 최적화
- **버퍼 최소화**: 웹캠 버퍼 크기 1로 설정
- **주기적 정리**: 100프레임마다 가비지 컬렉션
- **리소스 해제**: 예외 발생 시에도 안전한 정리
- **메모리 누수 방지**: finally 블록으로 보장

---

## 🏗️ 아키텍처

```
         프로그램 시작
              |
              v
    +------------------+
    |    웹캠 연결      |
    +--------+---------+
             |
             v
    +------------------+
    |  얼굴 검출기 로드  |
    +--------+---------+
             |
             v
    +------------------+
    |  실시간 처리 루프  | <-----------+
    +--------+---------+             |
             |                       |
             v                       |
    +------------------+             |
    |   프레임 읽기      |             |
    +--------+---------+             |
             |                       |
             v                       |
    +------------------+             |
    |    얼굴 검출      |              |
    +--------+---------+             |
             |                       |
             v                       |
    +------------------+             |
    |   결과 표시       |              |
    +--------+---------+             |
             |                       |
             v                       |
    +------------------+             |
    |   키 입력 확인     |             |
    +--------+---------+             |
             |                       |
             v                       |
         ESC 키?                      |
         /     \                     |
      Yes/       \No                 |
        /         \                  |
       v           +------------------+
+------------------+
|   프로그램 종료    |
+--------+---------+
         |
         v
+------------------+
|   리소스 해제     |
+------------------+
```

### 주요 컴포넌트
- **웹캠 관리**: 안전한 연결, 버퍼 최적화
- **얼굴 검출**: Haar Cascade 알고리즘
- **메모리 관리**: 가비지 컬렉션, 리소스 해제
- **사용자 인터페이스**: 키보드 입력, 화면 표시

---

### 일반적인 문제
```bash
# 웹캠 접근 권한 (Linux)
ls /dev/video*

# OpenCV 재설치
pip3 install --upgrade opencv-python
```

### 오류 메시지별 해결
- **"failed open webcam"**: 다른 프로그램에서 웹캠 사용 중
- **"can't load face detector"**: data/haarcascades/ 폴더 확인
- 메모리 부족: 다른 프로그램 종료 후 재실행


## 🔍 알고리즘 정보

### Haar Cascade
- **파일**: `haarcascade_frontalface_alt.xml`
- **크기**: 약 930KB
- **검출 방식**: 정면 얼굴 특화
- **최소 크기**: 30x30 픽셀

### 검출 파라미터
```python
faces = face_cascade.detectMultiScale(
    gray,           # 그레이스케일 이미지
    1.1,            # 스케일 팩터
    3,              # 최소 이웃 수
    minSize=(30,30) # 최소 얼굴 크기
)
---


👨‍💻 작성자

42gyeongsan - junkwak